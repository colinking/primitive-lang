"$schema": https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json
name: Primitive
scopeName: source.prim
fileTypes:
- prim
patterns:
- include: "#comment"
- include: "#namespace"
- include: "#bracket"
- include: "#delimiter"
- include: "#keyword"
- include: "#object"
repository:
  comment:
    begin: "//"
    beginCaptures:
      '0':
        name: punctuation.definition.comment.prim
    end: "$"
    name: comment.line.double-slash.prim

  namespace:
    match: "(?<=namespace)\\s+([a-z][a-zA-Z0-9_]*)"
    captures:
      '1':
        name: entity.name.namespace.prim

  bracket:
    patterns:
    - match: "\\{|\\}"
      name: punctuation.other.bracket.curly.prim
    - match: "\\(|\\)"
      name: punctuation.other.bracket.round.prim
    - match: "\\[|\\]"
      name: punctuation.other.bracket.square.prim

  delimiter:
    patterns:
    - match: "\\."
      name: punctuation.other.period.prim
    - match: "\\?"
      name: punctuation.other.optional.prim

  keyword:
    patterns:
    - name: keyword.other.namespace.prim
      match: "\\b(namespace)\\b"
    - name: keyword.other.object.prim
      match: "\\b(object)\\b"

  object:
    name: meta.object.prim
    begin: "(?<=object)\\s+([A-Z][a-zA-Z0-9_]*)"
    beginCaptures:
      '1':
        name: entity.name.type
    end: "(?<=\\})"
    patterns:
    - include: "#comment"
    - include: "#object-content"

  object-content:
    begin: "{"
    beginCaptures:
      '0':
        name: punctuation.definition.block.prim
    end: "}"
    endCaptures:
      '0':
        name: punctuation.definition.block.prim
    patterns:
    - include: "#comment"
    - include: "#field"

  field-type:
    name: entity.name.type
    match: "\\b[A-Z][a-zA-Z0-9_]*\\b"

  field:
    name: meta.field.declaration.prim
    match: "(?x)\\s*\\b([a-z][a-zA-Z0-9_]*)\\b([A-Z][a-zA-Z0-9_]*)\\b"
    captures:
      '1':
        name: entity.name
      '2':
        name: entity.name.type
